# WebPRND
Подготовили:
* Тришин Андрей
* Владимир Бредихин
* Дмитрий Шепелев

Используемые технологии:
* TypeScript - язык скриптов на страницах
* Flask - микро-фреймворк, на котором сделан весь бэкэнд проекта
* vis.js - TypeScript-библиотека, на которой сделан редактор
* Bootstrap - CSS-фреймворк, на нём сделан весь фронтэнд проекта
* SQLAlchemy - библиотека для доступа к базе данных

Страницы проекта:
* **/index** (доступно и как /) - заглавная страница
* **/obtain** - страница для получения токена API (подробнее в [api.md](api.md))
* **/login** - форма входа, сделана по документации из учебника, ничего особенного
* **/register** - аналогично /login
* **/editor** - фактически самая сложная с технической точки зрения страница
в проекте. На ней можно делать цепи из разных алгоритмов генерации случайных
чисел и сохранять результат в различных форматах, таких как json и css.

Весь проект разделён на 2 blueprint'a: [api](../api.py) и [pages](../pages/__init__.py).
Они отвечаются за API и отображаемые пользователю страницы соответственно.

Для упрощения обработки ошибок существует модуль [api_error](../api_error.py).
Он позволяет удобно создавать и возвращать пользователю ошибки, которые может
прочеть как человек, так и обработать программа.

Авторизация в проекте реализована с помощью [токенов](../auth/token.py).
Токен состоит из цифровой подписи, времени истечения, роли (т.е. области действия)
и логина пользователя. Цифровые подписи сделаны с помощью библиотеки ECDSA и
вроде даже гарантируют некоторую безопасность (но это не точно).

Данные пользователей (логин, хэш пароля и ключ для создания подписей, 
зашифрованный паролем) хранятся в базе данных db/users.db.

Некоторые функции кода, которые могут сломаться покрыты тестами.
Тесты находятся в папке [test/](../test/). Также реализован автоматически запуск
этих тестов при отправки кода в [репозиторий на Github](https://github.com/zatrit/webprnd).

**Минимальная поддерживаемая версия Python - 3.10**

Для запуска на локальном компьютере необходимо:
- Cкачать исходный код.
- Установить зависимости выполнив
    ```shell
    pip install -r requirements.txt
    ```
- Cделать, чтобы в папке static/ были нужные файлы. Для этого есть два способа:
    * Скачать заранее скомпилированные файлы и распаковать в папку static/. 
    Ссылка: https://disk.yandex.ru/d/ocXUoe4aSiOMTA
    * Скомпилировать вручную. Для этого необходимо установить Node.js и
    выполнить
    ```shell
    pip install -r minify-requirements.txt
    npm i
    ./build.py --minify # эта команда выполняется очень долго
    ```
- Готово! Теперь вы можете запустить проект с помощью файла ./main.py